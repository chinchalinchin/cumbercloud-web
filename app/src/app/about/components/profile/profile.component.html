<div *ngIf="selectedProfile">
  <div id="about-bg" *ngIf="!mobileMode()" [@expand]>
  </div>

  <div
    role="region"
    id="responsive-content-1"
    aria-label="Personas & Proficiencies, Animation Area 1"
  >
    <div
      role="region"
      id="responsive-content-text"
      aria-label="Text for responsive content"
    >
      <section id="persona-section" *ngIf="unfolded && who" aria-live="polite">
        <div
          *ngFor="let index of [0, 1, 2]"
          [id]="selectedProfile.factoids[index].id"
          class="animation mat-h2 text-default clicker"
          (click)="flip(selectedProfile.factoids[index])"
        >
          <div
            *ngIf="
              !flipped || flippedContent === selectedProfile.factoids[index]
            "
            [@fade]
            [class.text-primary]="colorCntls[index]"
            (mouseenter)="colorCntls[index] = true"
            (mouseleave)="colorCntls[index] = false"
          >
            {{ selectedProfile.factoids[index].toggle }}
          </div>
          <div
            *ngIf="
              flipped && flippedContent === selectedProfile.factoids[index]
            "
            class="profile-underline"
            [@enlarge]
          ></div>
        </div>
      </section>

      <section id="proficiency-section" *ngIf="unfolded && what">
        <div
          *ngFor="let index of [3, 4, 5]"
          [id]="selectedProfile.factoids[index].id"
          class="animation mat-h2 text-default clicker"
          (click)="flip(selectedProfile.factoids[index])"
        >
          <div
            *ngIf="
              !flipped || flippedContent === selectedProfile.factoids[index]
            "
            [@fade]
            [class.text-primary]="colorCntls[index]"
            (mouseenter)="colorCntls[index] = true"
            (mouseleave)="colorCntls[index] = false"
          >
            {{ selectedProfile.factoids[index].toggle }}
          </div>
          <div
            *ngIf="
              flipped && flippedContent === selectedProfile.factoids[index]
            "
            class="profile-underline"
            [@enlarge]
          ></div>
        </div>
      </section>
    </div>

    <div
      role="region"
      id="responsive-content-imgs"
      aria-label="Graphics for responsive content"
    >
      <div
        id="mathematician-droplet"
        aria-labelledby="mathematician-text"
        class="animation"
        *ngIf="!mobileMode()"
        [@cntl_position_who_1]="whoPositionCntls[0].state"
      >
        <object data="/assets/svgs/rain-droplet.svg" type="image/svg+xml">
          <!--TODO: <img src="yourfallback.jpg" /> -->
        </object>
      </div>
      <div
        id="technologist-droplet"
        aria-labelledby="technologist-text"
        class="animation"
        *ngIf="!mobileMode()"
        [@cntl_position_who_2]="whoPositionCntls[1].state"
      >
        <object data="/assets/svgs/rain-droplet.svg" type="image/svg+xml">
          <!--TODO: <img src="yourfallback.jpg" /> -->
        </object>
      </div>
      <div
        id="educator-droplet"
        aria-labelledby="educator-text"
        class="animation"
        *ngIf="!mobileMode()"
        [@cntl_position_who_3]="whoPositionCntls[2].state"
      >
        <object data="/assets/svgs/rain-droplet.svg" type="image/svg+xml">
          <!--TODO: <img src="yourfallback.jpg" /> -->
        </object>
      </div>

      <div
        id="development-droplet"
        aria-labelledby="development-text"
        class="animation"
        style="cursor: help"
        *ngIf="!mobileMode()"
        [@cntl_position_what_1]="whatPositionCntls[0].state"
      >
        <object data="/assets/svgs/rain-droplet.svg" type="image/svg+xml">
          <!--TODO: <img src="yourfallback.jpg" /> -->
        </object>
      </div>
      <div
        id="architecture-droplet"
        aria-labelledby="architecture-text"
        class="animation"
        *ngIf="!mobileMode()"
        [@cntl_position_what_2]="whatPositionCntls[1].state"
      >
        <object data="/assets/svgs/rain-droplet.svg" type="image/svg+xml">
          <!--TODO: <img src="yourfallback.jpg" /> -->
        </object>
      </div>
      <div
        id="design-droplet"
        aria-labelledby="design-text"
        class="animation"
        *ngIf="!mobileMode()"
        [@cntl_position_what_3]="whatPositionCntls[2].state"
      >
        <object data="/assets/svgs/rain-droplet.svg" type="image/svg+xml">
          <!--TODO: <img src="yourfallback.jpg" /> -->
        </object>
      </div>
    </div>
  </div>

  <div
    role="region"
    id="responsive-content-controls"
    aria-controls="responsive-content"
    aria-label="Controls for responsive content"
  >
    <svg
      x="0px"
      y="0px"
      width="30%"
      height="30%"
      viewBox="0 0 453.421 453.421"
      id="who-cloud"
      aria-labelledby="who-banner"
      class="animation"
      [@cntl_scale_banner]="whoBnrScaleCntl.state"
    >
      <path
        [class.cloud-svg-dark]="!who"
        [class.cloud-svg-select]="who"
        [attr.d]="svgConfig.cloud.path_1"
      />
      <path
        [class.cloud-svg-light]="!who"
        [class.cloud-svg-select]="who"
        [attr.d]="svgConfig.cloud.path_2"
      />
      <path
        [class.cloud-border]="!who"
        [class.cloud-border-select]="who"
        [attr.d]="svgConfig.cloud.path_3"
      />
      <path style="fill: #ffffff" [attr.d]="svgConfig.cloud.path_4" />
    </svg>

    <svg
      x="0px"
      y="0px"
      width="30%"
      height="30%"
      class="animation"
      viewBox="0 0 453.421 453.421"
      id="what-cloud"
      aria-labelledby="what-banner"
      [@cntl_scale_banner]="whatBnrScaleCntl.state"
    >
      <path
        [class.cloud-svg-dark]="!what"
        [class.cloud-svg-select]="what"
        [attr.d]="svgConfig.cloud.path_1"
      />
      <path
        [class.cloud-svg-light]="!what"
        [class.cloud-svg-select]="what"
        [attr.d]="svgConfig.cloud.path_2"
      />
      <path
        [class.cloud-border]="!what"
        [class.cloud-border-select]="what"
        [attr.d]="svgConfig.cloud.path_3"
      />
      <path style="fill: #ffffff" [attr.d]="svgConfig.cloud.path_4" />
    </svg>
  </div>

  <div
    role="region"
    id="responsive-content-2"
    aria-label="Accompanying Graphics, Animation Area 2"
  >
    <object
      id="who-grass"
      aria-label="grass growing graphics"
      class="animation"
      data="/assets/svgs/grass.svg"
      [@cntl_position_who_grass]="whoGrassPositionCntl.state"
      type="image/svg+xml"
    >
      <!--TODO: <img src="yourfallback.jpg" /> -->
    </object>

    <object
      id="what-grass"
      aria-label="grass growing graphics"
      class="animation"
      data="/assets/svgs/grass.svg"
      [@cntl_position_what_grass]="whatGrassPositionCntl.state"
      type="image/svg+xml"
    >
      <!--TODO: <img src="yourfallback.jpg" /> -->
    </object>

    <object
      id="who-flower"
      class="animation"
      aria-label="flower growing animation"
      data="/assets/svgs/flower.svg"
      [@cntl_position_who_flower]="whoFlowerPositionCntl.state"
    >
      <!--TODO: <img src="yourfallback.jpg" /> -->
    </object>

    <object
      id="what-flower"
      class="animation"
      aria-label="flower growing animation"
      data="/assets/svgs/flower.svg"
      [@cntl_position_what_flower]="whatFlowerPositionCntl.state"
    >
      <!--TODO: <img src="yourfallback.jpg" /> -->
    </object>
  </div>

  <div id="about">
    <div
      id="who-banner"
      class="animation"
      *ngIf="!mobileMode()"
      (mouseenter)="animate('who')"
    >
      <div
        id="who-banner-text"
        class="fancy-text banner-content text-center text-primary-light"
        [class.highlight]="who"
        [@cntl_scale_text]="whoTxtScaleCntl.state"
      >
        {{ who ? "personas" : "who i am" }}
      </div>
    </div>

    <mat-card
      id="profile-card"
      class="mat-elevation-z3"
      [@cntl_flip]="cardFlipCntl.state"
    >
      <div class="front face" *ngIf="!flipped">
        <div id="profile-header" class="center">
          <div class="profile-pic-container">
            <img
              [src]="selectedProfile.src"
              [title]="selectedProfile.title"
              class="profile-pic"
            />
          </div>
        </div>

        <mat-card-title class="text-center">
          {{ selectedProfile.name }}
        </mat-card-title>

        <mat-card-subtitle class="text-center">
          {{ selectedProfile.position }}
        </mat-card-subtitle>

        <mat-card-content
          id="unflipped-content"
          class="profile-scroller mat-elevation-z4"
          *ngIf="mobileMode()"
        >
          <div class="mobile-viewport">
            <p
              class="mat-body"
              *ngFor="let blurb of selectedProfile.blurbs"
              [innerHTML]="blurb"
            ></p>
          </div>
        </mat-card-content>

        <div id="unflipped-actions" class="actions unflipped">
          <button
            mat-fab
            *ngIf="!mobileMode()"
            [routerLink]="['/about', 'resume', selectedProfile.key]"
            [matTooltip]="selectedProfile.arrow_tooltip"
            aria-label="Learn more about Grant Moore"
          >
            <mat-icon>arrow_right_alt</mat-icon>
          </button>
          <button
            mat-mini-fab
            *ngIf="mobileMode()"
            [routerLink]="['/about', 'resume', selectedProfile.key]"
            [matTooltip]="selectedProfile.arrow_tooltip"
            aria-label="Learn more about Grant Moore"
          >
            <mat-icon>arrow_right_alt</mat-icon>
          </button>
        </div>
      </div>

      <div class="back face full" *ngIf="flippedContent || !flipped">
        <div *ngIf="flippedContent" class="full">
          <mat-card-title class="text-center">
            {{ flippedContent.title }}
          </mat-card-title>
          <mat-card-content id="flipped-content" class="full">
            <div
              id="flipper"
              [style]="flippedContent.style ? flippedContent.style : null"
            >
              <img
                *ngFor="let img of flippedContent.imgs"
                [id]="img.id"
                [class]="img.class ? img.class : null"
                [src]="img.src"
                [alt]="img.alt"
                [title]="img.title"
                [style]="img.style"
              />
            </div>
          </mat-card-content>

          <div id="flipped-actions" class="actions flipped">
            <button
              id="flip-btn"
              mat-fab
              class="clicker"
              (click)="flip(undefined)"
              aria-label="Go back to Profile"
              aria-controls="flipper"
            >
              <mat-icon>refresh</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </mat-card>

    <div
      id="what-banner"
      class="animation"
      *ngIf="!mobileMode()"
      (mouseenter)="animate('what')"
    >
      <div
        id="what-banner-text"
        class="fancy-text banner-content text-center text-primary-light"
        [class.highlight]="what"
        [@cntl_scale_text]="whatTxtScaleCntl.state"
      >
        {{ what ? "proficiencies" : "what i do" }}
      </div>
    </div>
  </div>
</div>
